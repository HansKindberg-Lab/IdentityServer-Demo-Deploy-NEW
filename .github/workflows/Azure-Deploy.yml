name: "Azure-Deploy"

on:
  #push:
  #  branches: [ master ]
  workflow_dispatch:  

jobs:
  Azure-Deploy:
    name: "Azure-Deploy"
    runs-on: "ubuntu-latest"
    steps:
      - name: "Checkout code"
        uses: actions/checkout@v2
      - name: "Azure sign-in"
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
      - name: "ARM deploy"
        uses: azure/arm-deploy@v1
        with:
          parameters: domainNameLabel=abcdefghij name=myPublicIpAddress
          region: ${{ secrets.AZURE_LOCATION }}
          resourceGroupName: ${{ secrets.AZURE_RESOURCEGROUP }}
          scope: subscription
          subscriptionId: ${{ secrets.AZURE_SUBSCRIPTION }}
          template: "Source/Template.json"